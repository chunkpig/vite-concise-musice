import{U as r}from"./index.397f8e43.js";import{C as n,D as t,F as i,G as s}from"./search.7d80b5fc.js";function u(e){return console.log(n(e)),typeof n(e)!="string"?n(e):null}function c(e){return t.post(`/login/status?timerstamp=${Date.now()}`,e)}function m(e){return t.get(`/login/qr/key?timerstamp=${Date.now()}`,e)}function p(e){return t.get(`/login/qr/create?timerstamp=${Date.now()}`,e)}function y(e){return t.get(`/login/qr/check?key=${e}&timerstamp=${Date.now()}`)}function l(e){return t.get("/logout")}const h=r({id:"user",state:()=>({userinfo:u("userinfo"),cookiekey:n("cookiekey")}),actions:{updateUserinfo(e){this.userinfo=e,i("userinfo",e)},updateKey(e){this.cookiekey=e,i("cookiekey",e)},updateStatus(){c({cookie:this.cookiekey}).then(e=>{const{profile:o}=e.data;o&&this.updateUserinfo(o)})},userlayout(){l().then(e=>{s("userinfo"),s("cookiekey"),this.userinfo=null,this.cookiekey=""})}}});function d(e){return t.get("/recommend/songs",e)}function f(e){return t.get("/record/recent/song",e)}const D=r({id:"daily",state:()=>({dailylist:[]}),actions:{updaterecommend(){d().then(e=>{e.code===200&&(this.dailylist=e.data.dailySongs)})},updaterecent(){f().then(e=>{if(e.code===200){let o=e.data.list;this.dailylist=o.map(a=>a.data)}})}}});export{D,p as a,y as b,m as l,h as u};
